<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FinSmart Personal Finance Bot</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h2>ü§ñ FinSmart ‚Äî Your Personal Finance Assistant</h2>

    <form method="POST">
        {% if not session.income %}
            <input type="number" name="monthly_income" placeholder="Enter your monthly income" required>
        {% endif %}

        <label for="action">Choose Action:</label>
        <select name="action" required onchange="toggleExpenseFields(this.value)">
            <option value="">--Select--</option>
            <option value="add">Add Expense</option>
            <option value="summary">Show Summary</option>
            <option value="budget">Suggest Monthly Budget</option>
            <option value="tip">Get Saving Tip</option>
            <option value="download">Download Report</option>
        </select>

        <div id="expense-fields" style="display:none;">
            <input type="number" name="amount" placeholder="Amount (‚Çπ)">
            <input type="text" name="category" placeholder="Category (e.g. groceries, rent)">
            <input type="text" name="description" placeholder="Short Description">
        </div>

        <button type="submit">Run Bot</button>
    </form>

    {% if session.income %}
        <p style="margin-top: 10px; color: #03dac6;">
            ‚úÖ Your monthly income is ‚Çπ{{ session.income }}.<br>
            üí° You can spend up to ‚Çπ{{ (session.income * 0.8)|round(2) }} safely.
        </p>
    {% endif %}

    {% if result %}
        <div class="result-box">
            <h3>Result:</h3>
            <p>{{ result|safe }}</p>
        </div>
    {% endif %}
    
    <a href="/dashboard">‚¨ÖÔ∏è Back to Dashboard</a>
    <br><br>
    <a href="/" class="back-link">‚¨Ö Back to Home</a>

    <script>
        function toggleExpenseFields(action) {
            const fields = document.getElementById("expense-fields");
            fields.style.display = (action === "add") ? "block" : "none";
        }
    </script>
</body>
</html>
